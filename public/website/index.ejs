<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
     <!-- Compiled and minified CSS -->
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
</head>


 <!-- Compiled and minified JavaScript -->
 <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<body>
    <nav>
        <div class="nav-wrapper teal darken-2">
          <a href="#" class="brand-logo"> <img src="/qrcodejs/logo.jpg" width="100px;" alt=""></a>
          <ul id="nav-mobile" class="right hide-on-med-and-down">
            
          </ul>
        </div>
    </nav>

    <div class="container" style="margin-top:80px;">
            <ul class="collection">
                    
                    <li class="collection-item avatar">
                      <i class="material-icons circle">restaurant</i>
                      <span class="title">Kashmiri</span>
                      <p>Kebab <br>
                         Rs 150
                      </p>
                      <a href="#!" onclick="addtocart('kebab','150')" class="secondary-content"><i class="material-icons">restaurant</i></a>
                    </li>
                    <li class="collection-item avatar">
                      <i class="material-icons circle green">restaurant</i>
                      <span class="title">Middle East</span>
                      <p>Shwarma <br>
                         Rs 130
                      </p>
                      <a href="#!" onclick="addtocart('shwarma','130')" class="secondary-content"><i class="material-icons">restaurant</i></a>
                    </li>
                    <li class="collection-item avatar">
                      <i class="material-icons circle red">restaurant</i>
                      <span class="title">Hyderabadi</span>
                      <p>Chicken Biryani <br>
                         Rs 100
                      </p>
                      <a href="#!" onclick="addtocart('biryani','100')" class="secondary-content"><i class="material-icons">restaurant</i></a>
                    </li>

                    <li class="collection-item avatar">
                            <i class="material-icons circle red">restaurant</i>
                            <span class="title">Indian</span>
                            <p>Chicken Kanti <br>
                               Rs 350
                            </p>
                            <a href="#!" onclick="addtocart('kanti','350')" class="secondary-content"><i class="material-icons">restaurant</i></a>
                          </li>
                  </ul>
    </div>

    <input type="text" hidden value="<%= session %>" id="session_id">

    <footer class="center-align"> 
            <a class="waves-effect waves-light btn-small"  onclick="sendOrder()" ><i class="material-icons left">cloud</i>Rs. <span id="total">0</span> | Order</a>
    </footer>

<script>
      M.AutoInit();
    
        let order = []

      

      function addtocart(dish,value){
        order.push({dish:dish,value:value})
        console.log(order)
        console.log(event)
        event.path[0].innerText = "room_service";
        update_ui()
      }

      function update_ui(){
        document.querySelector("#total").innerText = ""
          let total= 0
          order.forEach(dish => {
              total = total + parseInt(dish.value) 
          });
          document.querySelector("#total").innerText = total
      }

      function sendOrder(){
            order.push({session:document.querySelector("#session_id").value})
            window.location.assign(`/initorder?order=${JSON.stringify(order)}`)
      }
      
</script>            
</body>

</html>